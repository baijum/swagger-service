<!DOCTYPE html>
<html>
<head>
        <meta charset="UTF-8">
        <title>goa Swagger UI</title>
        <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16" />
        <link href="css/typography.css" media="screen" rel="stylesheet" type="text/css"/>
        <link href="css/reset.css" media="screen" rel="stylesheet" type="text/css"/>
        <link href="css/screen.css" media="screen" rel="stylesheet" type="text/css"/>
        <link href="css/reset.css" media="print" rel="stylesheet" type="text/css"/>
        <link href="css/print.css" media="print" rel="stylesheet" type="text/css"/>
        <link href="css/modal.css" media="screen" rel="stylesheet" type="text/css"/>
        <script src="lib/jquery-1.8.0.min.js" type="text/javascript"></script>
        <script src="lib/jquery.slideto.min.js" type="text/javascript"></script>
        <script src="lib/jquery.wiggle.min.js" type="text/javascript"></script>
        <script src="lib/jquery.ba-bbq.min.js" type="text/javascript"></script>
        <script src="lib/handlebars-2.0.0.js" type="text/javascript"></script>
        <script src="lib/underscore-min.js" type="text/javascript"></script>
        <script src="lib/backbone-min.js" type="text/javascript"></script>
        <script src="swagger-ui.js" type="text/javascript"></script>
        <script src="lib/highlight.7.3.pack.js" type="text/javascript"></script>
        <script src="lib/marked.js" type="text/javascript"></script>
        <script src="lib/swagger-oauth.js" type="text/javascript"></script>

        <!-- Some basic translations -->
        <!-- <script src="lang/translator.js" type="text/javascript"></script> -->
        <!-- <script src="lang/ru.js" type="text/javascript"></script> -->
        <!-- <script src="lang/en.js" type="text/javascript"></script> -->

        <script type="text/javascript">
        $(function () {
                var url = window.location.search.match(/url=([^&]+)/);
                if (url && url.length > 1) {
                        url = url[1]
                        if (url.slice(0, 11) != "github.com/") {
                                url = "github.com/" + url
                        }
                        url = "http://104.197.16.117:8080/swagger/spec/"+url
                } else {
                        $("#api_selector").show()
                }

                // Pre load translate...
                if(window.SwaggerTranslator) {
                        window.SwaggerTranslator.translate();
                }
                window.swaggerUi = new SwaggerUi({
                        url: url,
                        dom_id: "swagger-ui-container",
                        supportedSubmitMethods: ["get", "post", "put", "delete", "patch"],
                        onComplete: function(swaggerApi, swaggerUi){
                                if(typeof initOAuth == "function") {
                                        initOAuth({
                                                clientId: "your-client-id",
                                                clientSecret: "your-client-secret-if-required",
                                                realm: "your-realms",
                                                appName: "your-app-name",
                                                scopeSeparator: ","
                                        });
                                }

                                if(window.SwaggerTranslator) {
                                        window.SwaggerTranslator.translate();
                                }

                                $("pre code").each(function(i, e) {
                                        hljs.highlightBlock(e)
                                });

                                addApiKeyAuthorization();
                        },
                        onFailure: function(data) {
                                log("Unable to Load SwaggerUI");
                        },
                        docExpansion: "full",
                        // apisSorter: "alpha",
                        showRequestHeaders: false
                });

                function addApiKeyAuthorization(){
                        var key = encodeURIComponent($("#input_apiKey")[0].value);
                        if(key && key.trim() != "") {
                                var apiKeyAuth = new SwaggerClient.ApiKeyAuthorization("api_key", key, "query");
                                window.swaggerUi.api.clientAuthorizations.add("api_key", apiKeyAuth);
                                log("added key " + key);
                        }
                }

                $("#input_apiKey").change(addApiKeyAuthorization);

                if (url && url.length > 1) {
                        window.swaggerUi.load();
                }

                function log() {
                        if ("console" in window) {
                                console.log.apply(console, arguments);
                        }
                }

                $("#input_baseUrl").focus();
        })
        </script>
</head>

<body class="swagger-section">
        <div id="header">
                <div class="swagger-ui-wrap">
                        </h2>Swagger Browser</h2>
                </div>
        </div>

        <div id="message-bar" class="swagger-ui-wrap" data-sw-translate>&nbsp;</div>
        <!-- user input dialog -->
        <div class="modal" id="api_selector">
                <form accept-charset="UTF-8" id="prompt">
                        <div class="prompt">
                                <p>goa service design package:</p>
                        </div>
                        <div class="wrap">
                                <div class="left">
                                        <div class="filename">
                                                github.com/
                                        </div>
                                </div>
                                <div class="right">
                                        <a id="explore" href="#">Go</a>
                                </div>
                                <div class="center">
                                        <input id="input_baseUrl" name="url" type="text" />
                                </div>
                        </div>
                </form>
        </div>
</body>
</html>
